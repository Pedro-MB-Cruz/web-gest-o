<!DOCTYPE html>
<html lang="en">

<head>
  <!-- META -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- TITLE -->
  <title>Nexa Link</title>
  <!-- FAVICON -->
  <link rel="icon" type="image/x-icon" href="/static/public/favicon.ico">
  <!-- CSS -->
  <link rel="stylesheet" href="/static/styles/style.css">
  <link rel="stylesheet" href="/static/styles/bootstrap.min.css">
</head>

<body>
  <div id="root">
  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <div class="card h-100" style="width: 100%;">
          <img src="/static/img/planta_ebi_piso0.jpg" alt="Card Image" style="width: 100%;">
          <div class="card-body">
            <h4 class="card-title">Entrada</h4>
            <p>Refeitório</p>
            <p>Repografia</p>
            <p>Secretaria</p>
            <a href="#" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal0">Ver tabela de
              Redes</a>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card h-100" style="width: 100%;">
          <img src="img/blocoA.jpg" alt="Card Image" style="width: 100%;">
          <div class="card-body">
            <h4 class="card-title">Bloco A</h4>
            <p>Sala 9 - Sala 15</p>
            <a href="#" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal1">Ver tabela de
              Redes</a>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card h-100" style="width: 100%;">
          <img src="img/blocoB.jpg" alt="Card Image" style="width: 100%;">
          <div class="card-body">
            <h4 class="card-title">Bloco B</h4>
            <p>Sala 16 - Sala DT</p>
            <a href="#" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal2">Ver tabela de
              Redes</a>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card h-100" style="width: 100%;">
          <img src="img/BLOCOc.jpg" alt="Card Image" style="width: 100%;">
          <div class="card-body">
            <h4 class="card-title">Bloco C</h4>
            <p>Sala TIC</p>
            <p>Bar</p>
            <a href="#" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal3">Ver tabela de
              Redes</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="myModal0">
    <div class="modal-dialog">
      <div class="modal-content">


        <div class="modal-header">
          <h4 class="modal-title">Gestão de Redes da Entrada</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <table class="table" id="table-entrance">
            <tr>
              <th>Id</th>
              <th>Name</th>
              <th>Ip</th>
              <th>mask</th>
              <th>network</th>
            </tr>
          </table>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fechar</button>
        </div>

      </div>
    </div>
  </div>
  <div class="modal" id="myModal1">
    <div class="modal-dialog">
      <div class="modal-content">


        <div class="modal-header">
          <h4 class="modal-title">Gestão de Redes do Bloco A</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <table class="table" id="table-bloca">
            <tr>
              <th>Id</th>
              <th>Name</th>
              <th>Ip</th>
              <th>mask</th>
              <th>network</th>
            </tr>
          </table>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fechar</button>
        </div>

      </div>
    </div>
  </div>
  <div class="modal" id="myModal2">
    <div class="modal-dialog">
      <div class="modal-content">


        <div class="modal-header">
          <h4 class="modal-title">Gestão de Redes do Bloco B</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <table class="table" id="table-blocb">
            <tr>
              <th>Id</th>
              <th>Name</th>
              <th>Ip</th>
              <th>Mask</th>
              <th>Network</th>
            </tr>

          </table>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fechar</button>
        </div>

      </div>
    </div>
  </div>
  <div class="modal" id="myModal3">
    <div class="modal-dialog">
      <div class="modal-content">


        <div class="modal-header">
          <h4 class="modal-title">Gestão de Redes do Bloco C</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <table class="table" id="table-blocc">
            <tr>
              <th>Id</th>
              <th>Name</th>
              <th>Ip</th>
              <th>mask</th>
              <th>network</th>
            </tr>

          </table>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fechar</button>
        </div>

      </div>
    </div>
  </div>

  <div class="modal" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <h3 class="modal-title">Adicionar Rede</h3>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <h5>Id</h5>
          <input id="label" type="text" id="fname" name="fname">
          <h5>Name</h5>
          <input id="label" type="text" id="fname" name="fname">
          <h5>Ip</h5>
          <input id="label" type="text" id="fname" name="fname">
          <h5>Mask</h5>
          <input id="label" type="text" id="fname" name="fname">
          <h5>Network</h5>
          <input id="label" type="text" id="fname" name="fname">
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Adicionar</button>
        </div>

      </div>
    </div>
  </div>
  </div>
  <script>
    const listarRedes = async () => {
      let strHtml = ``
      //alert("aaaa")
      const response = await fetch('/api/network/all')
      const lv = await response.json()
      for (const rede of lv) {
        console.log(rede)
        strHtml += `
                  <tr>
                    <td>${rede.id}</td>
                      <td>${rede.name}</td>
                      <td>${rede.ipEntrance}</td>
                      <td>${rede.gateway}</td>
                      <td>
                          <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#upModal" onclick="EditRede(${rede.id})"><i class="fa fa-pencil"></i> Editar</button>
                          <button type='button' class='btn btn-danger' onclick="apagaRede(${rede.id})"><i class="fa fa-trash"></i> Apagar</button>
                      </td>
                  </tr>
                      `
      }
      document.getElementById("cardRedes").innerHTML = strHtml;
    }
    listarRedes();
  </script>

  <script>
    fetch("/api/network/all")
      .then(response => response.json())
      .then(data => {
        console.log(data);
      })
  </script>
  <script>
const novaRede = async () => {
  var dados = {
    id: document.getElementById("mname").value,
    Network: document.getElementById("mipEntrance").value,
    Mask: document.getElementById("mgateway").value,
  };

  try {
    const response = await fetch('/api/network', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(dados)
    });

    if (!response.ok) {
      throw new Error('Erro ao obter os dados');
    }

    const data = await response.json();

    const resposta = `A rede com ID: ${dados.id} foi adicionada com sucesso!`;
    alert(resposta);

    listarRedes();
  } catch (error) {
    console.error('Houve um erro:', error);
  }
};

  </script>
  <script>
    const apagaRede = async (id) => {
      fetch("/api/network/:id" + id, {
        method: "DELETE",
        headers: { "Content-Type": "application/json" },
      })
        .then((response) => {
          // Verifica se a resposta foi bem sucedida
          if (!response.ok) {
            throw new Error("Erro ao obter os dados");
          }
          return response;
        })
        .then((data) => {
          // Faz algo com os dados
          //console.log(data);
          resposta = "O carro foi apagado com sucesso!";
          alert(resposta);
          listarRede();
        })
        .catch((error) => {
          // Captura qualquer erro de rede ou tratamento de erro
          console.error("Houve um erro:", error);
        });
    };

  </script>
  <script>
    const EditRede = async (id) => {
      //alert("aaaa")
      const response = await fetch('/api/network/:id' + id)
      const rede = await response.json()

      document.getElementById("muname").value = rede[0].name;
      document.getElementById("muipEntrance").value = rede[0].ipEntrace;
      document.getElementById("mugateway").value = rede[0].gateway;
    }

  </script>
  <script>
    const atualizaRede = async () => {
      var dados = {
        Name: document.getElementById("muname").value,
        Ip: document.getElementById("muipEntrance").value,
        Gateway: document.getElementById("mugateway").value,
      };
      fetch("/api/network/:id", {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dados),
      })
        .then((response) => {
          // Verifica se a resposta foi bem sucedida
          if (!response.ok) {
            throw new Error("Erro ao obter os dados");
          }
          // Converte a resposta para JSON
          return response.json();
        })
        .then((data) => {
          // Faz algo com os dados
          //console.log(data);
          resposta = "O carro com a marca: " + dados.Marca + " foi atualizado com sucesso!";
          alert(resposta);
          listarCarros();
        })
        .catch((error) => {
          // Captura qualquer erro de rede ou tratamento de erro
          console.error("Houve um erro:", error);
        });
    };

   </script>
   <script src="/static/scripts/bootstrap.bundle.min.js"></script>
   <script src="/static/scripts/load.js"></script>
   <script src="/static/scripts/script.js"></script>
  </script>
</body>

</html>